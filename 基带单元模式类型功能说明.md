# 基带单元模式类型功能说明

## 功能概述
在批量添加基带单元时，新增了"模式类型"字段，用户可以从以下四种模式中选择一种：
- KSA
- KMA
- SSA
- 基带数传

## 修改内容

### 1. 数据库修改
**文件**: `RuoYi-Vue/sql/add_mode_type_column.sql`

为 `sys_baseband_unit` 表添加了 `mode_type` 字段：
```sql
ALTER TABLE sys_baseband_unit ADD COLUMN mode_type VARCHAR(20) DEFAULT NULL COMMENT '模式类型：KSA/KMA/SSA/基带数传';
```

**执行方式**：
```bash
# 在MySQL中执行
mysql -u root -p your_database < RuoYi-Vue/sql/add_mode_type_column.sql
```

### 2. 后端修改

#### 2.1 实体类
**文件**: `RuoYi-Vue/ruoyi-system/src/main/java/com/ruoyi/system/domain/SysBasebandUnit.java`

添加了 `modeType` 属性及其 getter/setter 方法：
```java
/** 模式类型 KSA/KMA/SSA/基带数传 */
@Excel(name = "模式类型")
private String modeType;
```

#### 2.2 Mapper XML
**文件**: `RuoYi-Vue/ruoyi-system/src/main/resources/mapper/system/SysBasebandUnitMapper.xml`

- 在 `resultMap` 中添加了 `mode_type` 字段映射
- 在查询、插入、更新语句中添加了 `mode_type` 字段处理

### 3. 前端修改

**文件**: `RuoYi-Vue3/src/views/system/baseband/unit/index.vue`

#### 3.1 表单新增模式类型选择
在批量添加/修改对话框中，添加了模式类型下拉选择框：
```vue
<el-form-item label="模式类型" prop="modeType">
  <el-select v-model="form.modeType" placeholder="请选择模式类型" style="width: 100%">
    <el-option label="KSA" value="KSA" />
    <el-option label="KMA" value="KMA" />
    <el-option label="SSA" value="SSA" />
    <el-option label="基带数传" value="基带数传" />
  </el-select>
</el-form-item>
```

#### 3.2 表格新增模式类型列
在基带单元列表中，添加了"模式类型"列，使用不同颜色的标签显示：
- KSA: 蓝色（primary）
- KMA: 绿色（success）
- SSA: 橙色（warning）
- 基带数传: 灰色（info）

#### 3.3 表单验证
添加了模式类型的必填验证：
```javascript
modeType: [
  { required: true, message: "请选择模式类型", trigger: "change" }
]
```

#### 3.4 数据提交
- 新增时：批量创建的每个单元都会包含选择的模式类型
- 修改时：可以修改单元的模式类型

## 使用说明

### 批量添加基带单元
1. 点击"新增"按钮
2. 选择单元名称（如：前向中低速、返向高速等）
3. 选择一个或多个单元类型（编码、调制、解调、译码）
4. **选择模式类型**（KSA、KMA、SSA、基带数传）
5. 选择板卡资源
6. 填写版本和备注信息
7. 点击"确定"，系统将为每个选中的单元类型创建一个基带单元，所有单元共享相同的模式类型

### 修改基带单元
1. 点击某个单元的"修改"按钮
2. 可以修改包括模式类型在内的所有字段
3. 点击"确定"保存修改

### 查看模式类型
在基带单元列表中，"模式类型"列会以彩色标签的形式显示每个单元的模式类型。

## 注意事项

1. **数据库升级**：在使用此功能前，必须先执行 SQL 脚本添加 `mode_type` 字段
2. **必填字段**：模式类型是必填项，不选择将无法提交表单
3. **批量创建**：批量创建时，所有创建的单元将使用相同的模式类型
4. **兼容性**：已存在的基带单元数据，模式类型字段为空，在列表中显示为"-"

## 部署步骤

1. 执行数据库脚本：
   ```bash
   mysql -u root -p your_database < RuoYi-Vue/sql/add_mode_type_column.sql
   ```

2. 重新编译后端项目：
   ```bash
   cd RuoYi-Vue
   mvn clean package
   ```

3. 前端无需额外操作，刷新页面即可使用新功能
