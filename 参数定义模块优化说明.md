# 参数定义模块优化说明

## 📊 参数数量统计

### 优化后的参数配置

| 单元类型 | 参数数量 | 说明 |
|---------|---------|------|
| 编码 (ENCODE) | 30个 | 包含FEC、交织、帧结构、CRC、扰码、穿孔、Turbo/LDPC等 |
| 调制 (MODULATE) | 35个 | 包含调制方式、成形滤波、载波、功率、预失真、时钟、突发等 |
| 解调 (DEMODULATE) | 40个 | 包含解调方式、匹配滤波、AGC、载波恢复、定时恢复、均衡等 |
| 译码 (DECODE) | 32个 | 包含FEC译码、软判决、迭代、去交织、帧同步、CRC、解扰等 |
| **总计** | **137个** | 覆盖基带处理的所有关键参数 |

## 🎯 优化内容

### 一、参数定义优化

#### 1.1 参数命名规范化
- ✅ 统一前缀：`ENC_`、`MOD_`、`DEM_`、`DEC_`
- ✅ 语义化命名：清晰表达参数含义
- ✅ 避免歧义：区分相似参数

**示例：**
```
编码单元：ENC_FEC_TYPE, ENC_CODE_RATE, ENC_FRAME_LENGTH
调制单元：MOD_SCHEME, MOD_SYMBOL_RATE, MOD_OUTPUT_POWER
解调单元：DEM_SCHEME, DEM_AGC_TARGET, DEM_CARRIER_LOOP_BW
译码单元：DEC_FEC_TYPE, DEC_ITER_MAX, DEC_FRAME_SYNC_WORD
```

#### 1.2 参数分类完善

**编码单元 (30个参数)**
1. 基础编码参数 (5个)：FEC类型、码率、约束长度、生成多项式
2. 交织参数 (4个)：交织类型、行列数、深度
3. 帧结构参数 (4个)：帧长、同步字、帧头帧尾
4. CRC参数 (3个)：CRC类型、多项式、初始值
5. 扰码参数 (3个)：扰码使能、多项式、初始值
6. 穿孔参数 (2个)：删余使能、删余模式
7. Turbo/LDPC参数 (3个)：迭代次数、矩阵索引、扩展因子
8. 输出控制 (3个)：输出反转、格式、字节序
9. 测试调试 (3个)：测试模式、旁路、复位

**调制单元 (35个参数)**
1. 基础调制参数 (4个)：调制方式、符号率、采样率、过采样
2. 成形滤波器 (4个)：滤波器类型、滚降系数、跨度、BT积
3. 载波参数 (4个)：中频、频偏、相偏、载波抑制
4. 功率控制 (4个)：输出功率、功率回退、AGC使能、AGC目标
5. 预失真补偿 (5个)：预失真、I/Q不平衡、直流偏置
6. 时钟同步 (3个)：时钟源、同步模式、定时提前
7. 突发控制 (4个)：突发模式、上升下降时间、保护时间
8. 频谱控制 (2个)：频谱反转、边带抑制
9. 功放控制 (2个)：功放使能、功放偏置
10. 测试监控 (3个)：测试音、测试频率、环回模式

**解调单元 (40个参数)**
1. 基础解调参数 (4个)：解调方式、符号率、采样率、过采样
2. 匹配滤波器 (3个)：滤波器类型、滚降系数、跨度
3. 输入控制 (3个)：中频、输入带宽、输入衰减
4. AGC参数 (5个)：AGC使能、模式、目标、攻击衰减时间
5. 载波恢复 (6个)：环路类型、带宽、阻尼、最大频偏、搜索
6. 定时恢复 (4个)：环路类型、带宽、阻尼、最大误差
7. I/Q校准 (4个)：校准使能、增益补偿、相位补偿、直流消除
8. 均衡器 (4个)：均衡使能、类型、抽头数、步长
9. 信号质量 (4个)：SNR估计、C/N0门限、EVM门限、BER门限
10. 锁定告警 (4个)：锁定检测、门限、超时、重捕获
11. 频谱极性 (3个)：频谱反转、符号反转、差分解码
12. 测试调试 (2个)：环回模式、冻结环路

**译码单元 (32个参数)**
1. 基础译码参数 (4个)：FEC类型、码率、约束长度、回溯深度
2. 软判决参数 (3个)：软判决使能、位宽、度量类型
3. 迭代译码 (4个)：最大最小迭代、早停使能、早停门限
4. 去交织参数 (4个)：去交织类型、行列数、深度
5. 帧同步参数 (5个)：帧同步使能、同步字、容错、帧长、帧头
6. CRC校验 (4个)：CRC校验、类型、多项式、错误处理
7. 解扰参数 (3个)：解扰使能、多项式、初始值
8. 输出控制 (3个)：输出格式、输出反转、字节序
9. 误码统计 (3个)：BER测量、统计窗口、FER测量
10. 测试调试 (3个)：旁路模式、测试序列、复位

### 二、前端界面优化

#### 2.1 表格显示优化

**优化前的问题：**
- ❌ 参数ID显示混乱，不直观
- ❌ 列太多，信息密集
- ❌ 缺少视觉层次
- ❌ 类型显示单调

**优化后的改进：**
- ✅ 移除参数ID列，使用序号代替
- ✅ 单元类型使用彩色标签
- ✅ 值类型使用不同颜色标签
- ✅ 参数编码使用等宽字体
- ✅ 添加取值范围列
- ✅ 硬件顺序使用标签显示
- ✅ 表格行交替背景色
- ✅ 固定关键列（单元类型、操作）

#### 2.2 颜色标签系统

**单元类型标签：**
- 🔵 编码 (ENCODE) - Primary蓝色
- 🟢 调制 (MODULATE) - Success绿色
- 🟡 解调 (DEMODULATE) - Warning橙色
- 🔴 译码 (DECODE) - Danger红色

**值类型标签：**
- ⚪ 枚举 (ENUM) - 默认灰色
- 🟢 整数 (UINT) - Success绿色
- 🟡 浮点 (FLOAT) - Warning橙色
- 🔴 开关 (SWITCH) - Danger红色

#### 2.3 新增辅助函数

```javascript
// 单元类型相关
getUnitTypeName(unitType)  // 获取中文名称
getUnitTypeTag(unitType)   // 获取标签样式

// 值类型相关
getValueTypeName(valueType) // 获取中文名称
getValueTypeTag(valueType)  // 获取标签样式

// 枚举选项
getEnumCount(enumOptions)   // 获取枚举选项数量

// 表格样式
tableRowClassName()         // 交替行背景色
```

### 三、数据库优化

#### 3.1 参数编码规范

**命名规则：**
```
<单元前缀>_<功能模块>_<具体参数>

示例：
ENC_FEC_TYPE        - 编码_前向纠错_类型
MOD_SYMBOL_RATE     - 调制_符号_速率
DEM_CARRIER_LOOP_BW - 解调_载波环_带宽
DEC_ITER_MAX        - 译码_迭代_最大值
```

#### 3.2 硬件顺序优化

**排序规则：**
- 每个单元从10开始，步进10
- 同类参数连续编号
- 预留扩展空间

**示例：**
```
编码单元：
10 - ENC_FEC_TYPE
20 - ENC_CODE_RATE
30 - ENC_CONSTRAINT_LEN
...

调制单元：
10 - MOD_SCHEME
20 - MOD_SYMBOL_RATE
30 - MOD_SAMPLE_RATE
...
```

### 四、使用说明

#### 4.1 导入新参数

```bash
# 1. 备份现有数据（可选）
mysqldump -u root -p ry-vue sys_baseband_param_def > backup_params.sql

# 2. 导入新参数定义
mysql -u root -p ry-vue < RuoYi-Vue/sql/baseband_params_enhanced.sql

# 3. 验证导入结果
mysql -u root -p ry-vue -e "
SELECT unit_type, COUNT(*) as count 
FROM sys_baseband_param_def 
GROUP BY unit_type;"
```

预期输出：
```
+-------------+-------+
| unit_type   | count |
+-------------+-------+
| ENCODE      |    30 |
| MODULATE    |    35 |
| DEMODULATE  |    40 |
| DECODE      |    32 |
+-------------+-------+
```

#### 4.2 查看参数列表

**按单元类型查询：**
```sql
-- 查看编码单元参数
SELECT param_code, param_name, value_type, hardware_order
FROM sys_baseband_param_def
WHERE unit_type = 'ENCODE'
ORDER BY hardware_order;

-- 查看调制单元参数
SELECT param_code, param_name, value_type, hardware_order
FROM sys_baseband_param_def
WHERE unit_type = 'MODULATE'
ORDER BY hardware_order;
```

**按参数类型查询：**
```sql
-- 查看所有枚举类型参数
SELECT unit_type, param_code, param_name, enum_options
FROM sys_baseband_param_def
WHERE value_type = 'ENUM'
ORDER BY unit_type, hardware_order;

-- 查看所有浮点类型参数
SELECT unit_type, param_code, param_name, min_value, max_value, scale_factor
FROM sys_baseband_param_def
WHERE value_type = 'FLOAT'
ORDER BY unit_type, hardware_order;
```

### 五、参数说明文档

#### 5.1 编码单元关键参数

| 参数编码 | 参数名称 | 说明 |
|---------|---------|------|
| ENC_FEC_TYPE | 前向纠错类型 | 支持卷积、Turbo、LDPC、RS、BCH、极化码 |
| ENC_CODE_RATE | 编码码率 | 1/2到8/9多种码率 |
| ENC_INTERLEAVER_TYPE | 交织器类型 | 块交织、卷积交织、随机交织 |
| ENC_FRAME_LENGTH | 信息帧长 | 64-65536 bit |
| ENC_CRC_TYPE | CRC类型 | CRC8/16/24/32 |

#### 5.2 调制单元关键参数

| 参数编码 | 参数名称 | 说明 |
|---------|---------|------|
| MOD_SCHEME | 调制方式 | BPSK/QPSK/8PSK/16QAM/64QAM/256QAM/GMSK等 |
| MOD_SYMBOL_RATE | 符号率 | 1kSps - 100MSps |
| MOD_FILTER_TYPE | 成形滤波器 | 升余弦、根升余弦、高斯等 |
| MOD_OUTPUT_POWER | 输出功率 | -40dBm 到 +20dBm |
| MOD_PREDIST_ENABLE | 预失真使能 | DPD功能开关 |

#### 5.3 解调单元关键参数

| 参数编码 | 参数名称 | 说明 |
|---------|---------|------|
| DEM_SCHEME | 解调方式 | 支持自动识别 |
| DEM_AGC_MODE | AGC模式 | 慢速/中速/快速/自适应 |
| DEM_CARRIER_LOOP_BW | 载波环带宽 | 0.1Hz - 10kHz |
| DEM_EQUALIZER_TYPE | 均衡器类型 | LMS/RLS/CMA/判决反馈 |
| DEM_CNO_THRESHOLD | C/N0门限 | 载噪比告警阈值 |

#### 5.4 译码单元关键参数

| 参数编码 | 参数名称 | 说明 |
|---------|---------|------|
| DEC_FEC_TYPE | 译码类型 | 对应编码类型 |
| DEC_ITER_MAX | 最大迭代次数 | Turbo/LDPC迭代 |
| DEC_SOFT_WIDTH | 软判决位宽 | 2-10 bit量化 |
| DEC_FRAME_SYNC_WORD | 帧同步字 | 32bit同步码 |
| DEC_CRC_ERROR_ACTION | CRC错误处理 | 丢弃/标记/输出 |

## 📈 优化效果

### 对比数据

| 项目 | 优化前 | 优化后 | 提升 |
|-----|-------|-------|------|
| 参数总数 | 35个 | 137个 | +291% |
| 编码参数 | 9个 | 30个 | +233% |
| 调制参数 | 9个 | 35个 | +289% |
| 解调参数 | 9个 | 40个 | +344% |
| 译码参数 | 8个 | 32个 | +300% |
| 参数分类 | 无 | 10大类 | 新增 |
| 命名规范 | 不统一 | 统一前缀 | 100% |
| 界面可读性 | 一般 | 优秀 | 显著提升 |

### 用户体验提升

1. **参数查找更快** - 统一命名规范，一目了然
2. **配置更直观** - 彩色标签，视觉层次清晰
3. **错误更少** - 取值范围明确，减少配置错误
4. **维护更容易** - 参数分类清晰，便于管理

## 🔄 后续优化建议

1. **参数模板** - 预设常用配置模板
2. **参数校验** - 增强前端参数合法性校验
3. **参数导入导出** - 支持Excel批量导入导出
4. **参数版本管理** - 记录参数修改历史
5. **参数文档生成** - 自动生成参数说明文档
6. **参数搜索** - 支持全文搜索参数
7. **参数对比** - 对比不同单元的参数配置

## 📝 总结

本次优化大幅提升了基带监控模块的参数管理能力：
- ✅ 参数数量从35个增加到137个，覆盖更全面
- ✅ 参数命名规范化，易于理解和维护
- ✅ 前端界面优化，用户体验显著提升
- ✅ 数据结构优化，便于扩展和管理

系统现在具备了专业级基带处理系统的参数配置能力！🎉
