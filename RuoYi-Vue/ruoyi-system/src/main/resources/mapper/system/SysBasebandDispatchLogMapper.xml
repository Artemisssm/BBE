<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysBasebandDispatchLogMapper">

    <resultMap id="BasebandDispatchLogResult" type="com.ruoyi.system.domain.SysBasebandDispatchLog">
        <id     property="logId"         column="log_id"/>
        <result property="unitId"        column="unit_id"/>
        <result property="dispatchType"  column="dispatch_type"/>
        <result property="multicastIp"   column="multicast_ip"/>
        <result property="multicastPort" column="multicast_port"/>
        <result property="packetLen"     column="packet_len"/>
        <result property="resultStatus"  column="result_status"/>
        <result property="resultMsg"     column="result_msg"/>
        <result property="sendTime"      column="send_time"/>
        <result property="createBy"      column="create_by"/>
        <result property="createTime"    column="create_time"/>
    </resultMap>

    <select id="selectById" resultMap="BasebandDispatchLogResult">
        select log_id, unit_id, dispatch_type, multicast_ip, multicast_port, packet_len, result_status,
               result_msg, send_time, create_by, create_time
        from sys_baseband_dispatch_log
        where log_id = #{logId}
    </select>

    <select id="selectList" resultMap="BasebandDispatchLogResult">
        select log_id, unit_id, dispatch_type, multicast_ip, multicast_port, packet_len, result_status,
               result_msg, send_time, create_by, create_time
        from sys_baseband_dispatch_log
        <where>
            <if test="unitId != null">
                and unit_id = #{unitId}
            </if>
            <if test="resultStatus != null and resultStatus != ''">
                and result_status = #{resultStatus}
            </if>
        </where>
        order by send_time desc, log_id desc
    </select>

    <insert id="insertLog" parameterType="com.ruoyi.system.domain.SysBasebandDispatchLog" useGeneratedKeys="true" keyProperty="logId">
        insert into sys_baseband_dispatch_log
            (unit_id, dispatch_type, multicast_ip, multicast_port, packet_len,
             result_status, result_msg, send_time, create_by, create_time)
        values
            (#{unitId}, #{dispatchType}, #{multicastIp}, #{multicastPort}, #{packetLen},
             #{resultStatus}, #{resultMsg}, #{sendTime}, #{createBy}, #{createTime})
    </insert>

</mapper>

