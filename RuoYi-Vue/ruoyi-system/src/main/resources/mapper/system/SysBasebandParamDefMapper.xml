<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysBasebandParamDefMapper">
    
    <resultMap type="SysBasebandParamDef" id="SysBasebandParamDefResult">
        <result property="paramId"    column="param_id"    />
        <result property="unitType"    column="unit_type"    />
        <result property="paramCode"    column="param_code"    />
        <result property="paramName"    column="param_name"    />
        <result property="valueType"    column="value_type"    />
        <result property="enumOptions"    column="enum_options"    />
        <result property="minValue"    column="min_value"    />
        <result property="maxValue"    column="max_value"    />
        <result property="quantizationUnit"    column="quantization_unit"    />
        <result property="bitWidthType"    column="bit_width_type"    />
        <result property="sortOrder"    column="sort_order"    />
        <result property="stepValue"    column="step_value"    />
        <result property="defaultValue"    column="default_value"    />
        <result property="remark"    column="remark"    />
        <result property="createTime"    column="create_time"    />
    </resultMap>

    <sql id="selectSysBasebandParamDefVo">
        select param_id, unit_type, param_code, param_name, value_type, enum_options, min_value, max_value, quantization_unit, bit_width_type, sort_order, step_value, default_value, remark, create_time from sys_baseband_param_def
    </sql>

    <select id="selectSysBasebandParamDefList" parameterType="SysBasebandParamDef" resultMap="SysBasebandParamDefResult">
        <include refid="selectSysBasebandParamDefVo"/>
        <where>  
            <if test="unitType != null  and unitType != ''"> and unit_type = #{unitType}</if>
            <if test="paramCode != null  and paramCode != ''"> and param_code like concat('%', #{paramCode}, '%')</if>
            <if test="paramName != null  and paramName != ''"> and param_name like concat('%', #{paramName}, '%')</if>
        </where>
        order by unit_type, COALESCE(sort_order, 999999), param_id
    </select>
    
    <select id="selectSysBasebandParamDefByParamId" parameterType="Long" resultMap="SysBasebandParamDefResult">
        <include refid="selectSysBasebandParamDefVo"/>
        where param_id = #{paramId}
    </select>

    <select id="selectSysBasebandParamDefByUnitType" parameterType="String" resultMap="SysBasebandParamDefResult">
        <include refid="selectSysBasebandParamDefVo"/>
        where unit_type = #{unitType}
        order by COALESCE(sort_order, 999999), param_id
    </select>
        
    <insert id="insertSysBasebandParamDef" parameterType="SysBasebandParamDef" useGeneratedKeys="true" keyProperty="paramId">
        insert into sys_baseband_param_def
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="unitType != null and unitType != ''">unit_type,</if>
            <if test="paramCode != null and paramCode != ''">param_code,</if>
            <if test="paramName != null and paramName != ''">param_name,</if>
            <if test="valueType != null and valueType != ''">value_type,</if>
            <if test="enumOptions != null">enum_options,</if>
            <if test="minValue != null">min_value,</if>
            <if test="maxValue != null">max_value,</if>
            <if test="quantizationUnit != null">quantization_unit,</if>
            <if test="bitWidthType != null and bitWidthType != ''">bit_width_type,</if>
            <if test="stepValue != null">step_value,</if>
            <if test="defaultValue != null">default_value,</if>
            <if test="remark != null">remark,</if>
            create_time
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="unitType != null and unitType != ''">#{unitType},</if>
            <if test="paramCode != null and paramCode != ''">#{paramCode},</if>
            <if test="paramName != null and paramName != ''">#{paramName},</if>
            <if test="valueType != null and valueType != ''">#{valueType},</if>
            <if test="enumOptions != null">#{enumOptions},</if>
            <if test="minValue != null">#{minValue},</if>
            <if test="maxValue != null">#{maxValue},</if>
            <if test="quantizationUnit != null">#{quantizationUnit},</if>
            <if test="bitWidthType != null and bitWidthType != ''">#{bitWidthType},</if>
            <if test="stepValue != null">#{stepValue},</if>
            <if test="defaultValue != null">#{defaultValue},</if>
            <if test="remark != null">#{remark},</if>
            sysdate()
         </trim>
    </insert>

    <update id="updateSysBasebandParamDef" parameterType="SysBasebandParamDef">
        update sys_baseband_param_def
        <trim prefix="SET" suffixOverrides=",">
            <if test="unitType != null and unitType != ''">unit_type = #{unitType},</if>
            <if test="paramCode != null and paramCode != ''">param_code = #{paramCode},</if>
            <if test="paramName != null and paramName != ''">param_name = #{paramName},</if>
            <if test="valueType != null and valueType != ''">value_type = #{valueType},</if>
            <if test="enumOptions != null">enum_options = #{enumOptions},</if>
            <if test="minValue != null">min_value = #{minValue},</if>
            <if test="maxValue != null">max_value = #{maxValue},</if>
            <if test="quantizationUnit != null">quantization_unit = #{quantizationUnit},</if>
            <if test="bitWidthType != null and bitWidthType != ''">bit_width_type = #{bitWidthType},</if>
            <if test="stepValue != null">step_value = #{stepValue},</if>
            <if test="defaultValue != null">default_value = #{defaultValue},</if>
            <if test="remark != null">remark = #{remark},</if>
        </trim>
        where param_id = #{paramId}
    </update>

    <delete id="deleteSysBasebandParamDefByParamId" parameterType="Long">
        delete from sys_baseband_param_def where param_id = #{paramId}
    </delete>

    <delete id="deleteSysBasebandParamDefByParamIds" parameterType="String">
        delete from sys_baseband_param_def where param_id in 
        <foreach item="paramId" collection="array" open="(" separator="," close=")">
            #{paramId}
        </foreach>
    </delete>

    <update id="updateSortOrder" parameterType="map">
        update sys_baseband_param_def
        set sort_order = #{sortOrder}
        where param_id = #{paramId}
    </update>
</mapper>
