<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysBasebandParamDefMapper">

    <resultMap type="com.ruoyi.system.domain.SysBasebandParamDef" id="SysBasebandParamDefResult">
        <id     property="paramId"       column="param_id"/>
        <result property="unitType"      column="unit_type"/>
        <result property="paramCode"     column="param_code"/>
        <result property="paramName"     column="param_name"/>
        <result property="valueType"     column="value_type"/>
        <result property="enumOptions"   column="enum_options"/>
        <result property="minValue"      column="min_value"/>
        <result property="maxValue"      column="max_value"/>
        <result property="scaleFactor"   column="scale_factor"/>
        <result property="bitLength"     column="bit_length"/>
        <result property="hardwareOrder" column="hardware_order"/>
        <result property="defaultValue"  column="default_value"/>
        <result property="remark"        column="remark"/>
        <result property="createTime"    column="create_time"/>
    </resultMap>

    <sql id="selectParamDefVo">
        select param_id, unit_type, param_code, param_name, value_type, enum_options,
               min_value, max_value, scale_factor, bit_length, hardware_order,
               default_value, remark, create_time
        from sys_baseband_param_def
    </sql>

    <select id="selectBasebandParamDefList" resultMap="SysBasebandParamDefResult">
        <include refid="selectParamDefVo"/>
        <where>
            <if test="unitType != null and unitType != ''">
                AND unit_type = #{unitType}
            </if>
            <if test="paramName != null and paramName != ''">
                AND param_name like concat('%', #{paramName}, '%')
            </if>
            <if test="paramCode != null and paramCode != ''">
                AND param_code like concat('%', #{paramCode}, '%')
            </if>
            <if test="valueType != null and valueType != ''">
                AND value_type = #{valueType}
            </if>
        </where>
        order by unit_type, hardware_order
    </select>

    <select id="selectBasebandParamDefById" resultMap="SysBasebandParamDefResult">
        <include refid="selectParamDefVo"/>
        where param_id = #{paramId}
    </select>

    <insert id="insertBasebandParamDef" parameterType="com.ruoyi.system.domain.SysBasebandParamDef" useGeneratedKeys="true" keyProperty="paramId">
        insert into sys_baseband_param_def
        (unit_type, param_code, param_name, value_type, enum_options, min_value, max_value,
         scale_factor, bit_length, hardware_order, default_value, remark, create_time)
        values
        (#{unitType}, #{paramCode}, #{paramName}, #{valueType}, #{enumOptions}, #{minValue},
         #{maxValue}, #{scaleFactor}, #{bitLength}, #{hardwareOrder}, #{defaultValue}, #{remark},
         #{createTime})
    </insert>

    <update id="updateBasebandParamDef" parameterType="com.ruoyi.system.domain.SysBasebandParamDef">
        update sys_baseband_param_def
        <set>
            <if test="unitType != null">unit_type = #{unitType},</if>
            <if test="paramCode != null">param_code = #{paramCode},</if>
            <if test="paramName != null">param_name = #{paramName},</if>
            <if test="valueType != null">value_type = #{valueType},</if>
            <if test="enumOptions != null">enum_options = #{enumOptions},</if>
            <if test="minValue != null">min_value = #{minValue},</if>
            <if test="maxValue != null">max_value = #{maxValue},</if>
            <if test="scaleFactor != null">scale_factor = #{scaleFactor},</if>
            <if test="bitLength != null">bit_length = #{bitLength},</if>
            <if test="hardwareOrder != null">hardware_order = #{hardwareOrder},</if>
            <if test="defaultValue != null">default_value = #{defaultValue},</if>
            <if test="remark != null">remark = #{remark},</if>
        </set>
        where param_id = #{paramId}
    </update>

    <delete id="deleteBasebandParamDefById" parameterType="Long">
        delete from sys_baseband_param_def where param_id = #{paramId}
    </delete>

    <delete id="deleteBasebandParamDefByIds" parameterType="Long">
        delete from sys_baseband_param_def where param_id in
        <foreach collection="array" item="paramId" open="(" close=")" separator=",">
            #{paramId}
        </foreach>
    </delete>

    <select id="checkParamCodeUnique" resultMap="SysBasebandParamDefResult">
        <include refid="selectParamDefVo"/>
        where param_code = #{paramCode}
        limit 1
    </select>

</mapper>

