# 约束界面参数显示优化说明

## 优化内容

将约束管理界面的"源参数"和"目标参数"列改为显示**中文名称**，同时保留参数代码作为辅助信息。

## 更新前后对比

### 更新前
```
| 源参数 | 目标参数 |
|--------|----------|
| ENC_CODE_TYPE | ENC_CODE_RATE |
| MOD_TYPE | MOD_SYMBOL_RATE |
```

### 更新后
```
| 源参数 | 目标参数 |
|--------|----------|
| 编码方式 | 编码码率 |
| ENC_CODE_TYPE | ENC_CODE_RATE |
| 调制方式 | 符号率 |
| MOD_TYPE | MOD_SYMBOL_RATE |
```

## 显示格式

### 表格列
```
参数中文名称（大字，加粗）
参数代码（小字，灰色，等宽字体）
```

### 视觉效果
```
┌─────────────┐
│  编码方式    │  ← 14px, 加粗, 黑色
│ ENC_CODE_TYPE│  ← 11px, 灰色, Courier New
└─────────────┘
```

## 实现方式

### 1. 数据获取
在页面加载时获取所有参数定义：
```javascript
getParamDefList()  // 获取参数定义列表
```

### 2. 中文名称查找
通过参数代码查找中文名称：
```javascript
function getParamNameCn(paramCode) {
  if (!paramCode) return '-'
  
  // 从参数定义列表中查找
  const param = paramDefList.value.find(p => p.paramCode === paramCode)
  return param ? param.paramName : paramCode
}
```

### 3. 表格列模板
```vue
<el-table-column label="源参数" align="center" min-width="150">
  <template #default="scope">
    <div class="param-info">
      <div class="param-name-cn">{{ getParamNameCn(scope.row.sourceParamName) }}</div>
      <div class="param-code">{{ scope.row.sourceParamName }}</div>
    </div>
  </template>
</el-table-column>
```

### 4. 样式定义
```css
.param-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: center;
}

.param-name-cn {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.param-code {
  font-size: 11px;
  color: #999;
  font-family: 'Courier New', monospace;
}
```

## 优势

### 1. 易读性
- ✅ 中文名称更直观
- ✅ 不需要记忆参数代码
- ✅ 降低学习成本

### 2. 完整性
- ✅ 保留参数代码作为参考
- ✅ 便于技术人员查看
- ✅ 便于调试和排查

### 3. 一致性
- ✅ 与参数配置界面保持一致
- ✅ 与参数定义界面保持一致
- ✅ 统一的显示风格

## 示例场景

### 场景1：编码约束
```
源链路：返向中低速数传
源单元类型：编码
源参数：编码方式          ← 中文
       ENC_CODE_TYPE     ← 代码

目标参数：编码码率        ← 中文
         ENC_CODE_RATE   ← 代码
```

### 场景2：调制约束
```
源链路：返向中低速数传
源单元类型：调制
源参数：调制方式          ← 中文
       MOD_TYPE          ← 代码

目标参数：符号率          ← 中文
         MOD_SYMBOL_RATE ← 代码
```

### 场景3：ACM约束
```
源链路：ACM数传
源单元类型：编码
源参数：ACM使能           ← 中文
       ACM_ENABLE        ← 代码

目标参数：编码码率        ← 中文
         ENC_CODE_RATE   ← 代码
```

## 特殊情况处理

### 1. 参数不存在
如果参数代码在参数定义中找不到，直接显示参数代码：
```javascript
return param ? param.paramName : paramCode
```

### 2. 参数为空
如果参数代码为空（链路模式约束），显示"-"：
```javascript
if (!paramCode) return '-'
```

### 3. 参数定义未加载
页面加载时自动获取参数定义列表，确保数据可用。

## 用户体验

### 查看约束列表
```
用户看到：
- 编码方式 → 编码码率
- 调制方式 → 符号率
- ACM使能 → 编码码率

而不是：
- ENC_CODE_TYPE → ENC_CODE_RATE
- MOD_TYPE → MOD_SYMBOL_RATE
- ACM_ENABLE → ENC_CODE_RATE
```

### 理解约束关系
```
一目了然：
"编码方式" 影响 "编码码率"

而不是：
"ENC_CODE_TYPE" 影响 "ENC_CODE_RATE"（需要查文档）
```

### 配置新约束
```
选择参数时：
下拉列表显示：编码方式 (ENC_CODE_TYPE)
表格显示：编码方式
         ENC_CODE_TYPE
```

## 技术细节

### 数据流
```
1. 页面加载
   ↓
2. 调用 getParamDefList()
   ↓
3. 获取所有参数定义
   ↓
4. 存储到 paramDefList
   ↓
5. 表格渲染时调用 getParamNameCn()
   ↓
6. 从 paramDefList 查找中文名称
   ↓
7. 显示中文名称和参数代码
```

### 性能优化
- 参数定义列表只加载一次
- 使用 `find()` 方法快速查找
- 无需额外的API请求

### 兼容性
- 完全向后兼容
- 不影响现有数据
- 不需要修改后端

## 部署说明

### 前端更新
✅ 已完成，刷新浏览器即可看到效果

### 无需后端修改
✅ 不需要修改后端代码
✅ 不需要修改数据库
✅ 不需要重启应用

### 立即生效
按 `Ctrl + F5` 强制刷新浏览器即可。

## 总结

✅ 显示中文名称，更易读
✅ 保留参数代码，更完整
✅ 统一显示风格，更一致
✅ 无需后端修改，更简单
✅ 立即生效，更快速

现在约束管理界面的参数显示更加友好和直观了！
